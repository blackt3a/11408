## 流量控制-可靠传输与滑动窗口机制

流量控制的基本方法是由接收方控制发送方发送数据的速率，常见的方式有两种==停止-等待==协议和==滑动窗口==协议。

#### 停止-等待流量控制基本原理

:o:实现：

每发送一帧，==都==要等待对方的应答信号，==才==能发送下一帧。

如果对方不回复，发送方就==一直==等待，因此传输==效率低==。





#### 滑动窗口流量控制基本原理

:o:实现：

- 任意时刻，发送方都维持一组可以==连续发送==的帧的序号，称为==发送窗口==。

  同时，接收方也维持一组可以==连续接受==的帧的序号，称为==接受窗口==

- 只有==序号==在允许范围内的帧才能==接受/发送==。
- 发送端每收到一个==确认帧==，发送窗口就向前==滑动一个==帧的位置。如果发送窗口内的==全都没有==收到确认帧，就一直等。

:o:特性：

- ==只有==接受窗口滑动，发送窗口==才==有可能滑动
- 从概念上看，==停止-等待协议==，==后退$N$帧协议==和==选择重传协议==只在发送窗口与接受窗口==大小==上有区别。
  - 停止-等待协议：发送窗口=1，接受窗口=1
  - 后退$N$帧协议：发送窗口>1，接受窗口=1
  - 选择重传协议：发送窗口>1，接受窗口>1
- 接受窗口为`1`时，可保证帧的有序接受
- 数据链路层的滑动窗口协议，窗口大小在传输过程中是确认的(区别于传输层的滑动窗口协议，因为现有实际网络很少在数据链层采用可靠传输，通常是在运输层)



#### 可靠传输机制

数据链路层的可靠传输通常使用==确认==和==超时重传==机制完成。

:o:确认：

确认帧可以让发送方知道哪些内容被==正确接受==，为了传输效率，确认可以被==捎带==在回复帧里。

:o:超时重传：

发送数据后启动==计时器==，在一定时间内没有收到确认帧，就重新发送，直到成功为止。

:o:自动重传请求

自动重传请求(Automatic Repeat reQuest,`ARQ`)，接受方请求发送方重传来恢复出错的帧。

传统自动重传分为`3`种，==停止-等待==，==后退$N$帧==和==选择重传==。后两种是滑动窗口技术和请求重传技术的==结合==，当窗口足够大时，帧在线路上连续的流动，也称`连续ARQ`协议。由此可见，==数据链路层==中==流量控制==和===可靠传输==机制是==交织==的。



## 单帧滑动窗口与停止-等待协议

在停止-等待协议中，源站发送单个帧后==必须==等待确认，在目的站回答源站之前，==不能==发送其他数据帧，相当于发送窗口和接受窗口==皆为==`1`的滑动窗口协议。





## 多帧等待窗口与后退$N$帧协议(GBN)





## 多帧滑动窗口与选择重传协议(SR)