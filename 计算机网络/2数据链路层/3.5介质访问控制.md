介质访问控制的主要任务是，为使用介质的而每个结点隔离来自同一信道上其他结点所传送的信号。用来决定广播信道中信道分配分配的协议属于数据链路层的一个子层，称为介质访问控制(Medium Access Control，MAC)子层。



#### 信道划分介质访问控制

信道划分的==实质==就是通过==分频==，==分码==和==分时==，将原来==一条==物理线路划分为==多条==逻辑线路。将==广播==信号转变为==点对点==信号。

- 频分复用(FDM)

:o:实现：

将==多种==基带信号调制到==不同==频率载波上。

每个子信道的带宽==不相同==，但它们的总和必须不超过信道的==总带宽==。

在实际应用中，==相邻==信道间还需加入==保护信道==。

:o:优点：

充分利用带宽，系统效率较高，技术成熟，易实现。



- 时分复用(TDM)

:o:实现：

将一条物理信道按时间分成若干==时间片==，==轮流==给多个信号使用。

但往往某个信号在拥有时间片时==没信号==发送，所以信道利用率==不高==。

:o:改进

统计时分多路复用(STDM)，时间片==按需动态分配==，当有数据传输时，才会分配时间片。==用户最高速率==可以和==线路最高速率==相等。



- 波分多路复用(WDM)

波分多路复用即==光==的频分多路复用。







- 码分多路复用(CDM)

对不同的==原始信号==采用不同的==编码==方式。更常用的名字是==码分多址==(Code Division Multiple Access,`CDMA`)

:o:实现：

将每个每个比特时间再划分为`m`个短的时间槽。不同信道的码片序列==正交==



- 表示

信道A的比特`1`表示为`00011011`，相应的==反码==`11100100`表示`0`（为了方便，表示为`-1`）



- 传输

信道A的在某时刻发送的信号为`S`，同一时刻，信道B发送的信号为`T`，则在链路中，检测到的信号为`S+T`.



- 接受

在终点$S\cdot (S+T) $即为==信道A==传输的信号。

在终点$T\cdot (S+T) $即为==信道B==传输的信号。









:o:优点：

频谱利用率高。抗干扰强，保密性强，语音质量好，成本低，适用于无线通信系统，特别是移动通信技术。





#### 随即访问介质访问控制

:o:核心思想：

胜利者通过争用获得信道，从而获得信息的发送权。因此，随机访问介质控制协议又称==争用型协议==。



❗️注意：

信道划分机制中，结点中要么共享时间，要么共享空间。

随机访问介质控制机制，==既不==共享时间==也不==共享空间，是将==广播==信道转化为==点到点==信道(物理)





1. ALOHA协议
   - 纯ALOHA协议

   :o:实现：

   网络中==任何==一个站点需要发送数据时，可以==不进行==任何检测，如果在一段时间内==未收到确认==，那么该站点就认为在传输过程中发生了==冲突==，发送站点需要==等待==一段时间后再发送数据，==直到==发送成功

   - 时隙ALOHA协议

   :o:实现：

   时隙ALOHA协议把==所有==站点在时间上==同步==起来，并将时间划分成一段段==等长==的时隙，规定只能在每个时隙==开始==时才能发送一个帧，==减少==了随意性，==提高==了信道利用率。差不多是纯ALOHA协议的==两倍==

   

2. CSMA协议
   - 1-坚持CSMA协议

   :o:原理：

   发送数据前，==先监听==信道。如果信道空闲，则==立即==发送信号。如果信道忙，则==等待==，同时继续监听==直到==空闲，如果发生冲突则==随机等待==一段时间再重新开始监听。

   `1-`的意思是，如果想要发送数据==同时==监听到信道空闲，则发送概率为`1`。

   

   :o:特点：

   考虑到信号在信道中的==延迟==，坚持`CSMA`非常==容易冲突==。

   

   - 非坚持CSMA

   :o:原理：

   想要发送数据先监听信道，如果空闲就立即发送，如果忙则==放弃==监听，==随机等待==一段时间后再试。

   

   :o:特点：

   降低了冲突的概率，但会增加延迟。延迟时间==换==信道利用率

   

   - `p-`坚持`CSMA`

   :o:原理：

   想发送信号先监听信道，==闲则发送==，忙则监听，如果空闲，则以`p`的概率==发送==，`1-p`的概率==推迟==。

   :o:特点：

   相当于前两者的==折中==，==降低==了冲突的概率，采用`监听`是为了==减少延迟==

   

3. `CSMA/CD`协议

   是`CSMA`的改进。适用于==总线型==或==半双工==，对于全双工则==没必要==(因为没冲突)。适用于==有线局域网==

   

   :o:原理：

   先听后发，边听边发，冲突停发，==随机==重发。

   

   :o:特点：

   - 最小帧长

   因为，在信道中最短需要2倍==传输时延==(`争用期`)，才能知道帧==是否==传输正确(`确认帧`)。只有这样才能在==传输并监听==，做到边听边发。

   $最小帧长=传播时延 \times数据传输速率 \times 2$

   

   - 随机退避

   :o:原理：

   ==基本退避==时间等于==二倍传输时延==(争用期)。

   定义==重传次数==$K=min[重传次数,10]$。

   离散整数集合$[0,1,...2^k-1]$。从集合随机取一整数$r$

   $实际退避时间=二倍传输时延\times r$

   当重传16次后仍然不能成功，则上报发送==失败==(网络拥挤)

   

   :o:特点：

   退避时间==随==重传次数的增加，==动态概率增加==，但最多不会超过$1023 \times二倍传输时延$。

   

   

   

   

   

   

4. `CSMA/CA`协议

适用于无线局域网。无法也不合适检测所有碰撞，只能==尽可能==避免。

且因为，无线网信号波动大，一般都是采用链路层==确认/重传==(`ARQ`)，发一帧确认一帧。所以每次发送后==不是==立即再发送，==具体==时间看确认帧`ACK`等的长度。

:o:背景(无线局域网特点）：

- 接受信号的强度==远小于==发送信号的强度，且信号强度==波动很大==。
- 无线通信中，并非所有站点都能==听到==对方。即“隐蔽站”问题。

![img](../pictures/3.5%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6.assets/963bf6b1ac0d5501cf81f0918a113d67_720w.png)



:o:原理：

- 信道预约

使用`RTS`和`CTS`对信道进行==预约==(告诉其他人，自己要发送数据了)。解决`隐蔽站`问题。预约信道==不是==强制的，只是当数据帧超过一定长度时会比较==有利==。







:o:`CSMA/CD`和`CSMA/CA`的区别与共同点：

- 都是`先监听后发送`
- `CD`检测冲突，不能避免冲突。`CA`避免冲突，但==不是==百分百。
- 传输==介质==不同。
- 检测方式不同:`CD`是检测==电压==。`CA`是`能量检测`，`载波检测`和`能量载波混合`检测3种。





#### 轮询访问：令牌传递协议

用户==不能==随意的发送信息。而是一个集中的控制站以==循环==的方式轮询每个结点。

适用于==高负载==的信道(==多个==结点==同时==发送数据的概率很大)

:o:原理：

==令牌传输协议==中，令牌(`token`)沿环形总线在各结点计算机间==依次传递==。令牌是一个特殊的`MAC`控制帧，仅控制信道的==使用==。



:o:过程：

- 网络空闲时，==只有==令牌在环路中循环传递
- 当结点收到令牌==又==有数据想要传输，将令牌中某个标志位==翻转==，并加上==数据==和==目的==地址。
- 环中结点==都==将检查令牌中`MAC`地址和自己是否==相同==，同则==接受==，不同则转发。
- 当源点收到自己发的令牌，==除非==检查出错误(则重新发送)，否则将不再转发。



:o:注意：

令牌环网==物理==上可以不是一个环，但==逻辑==上必须是